<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pengajuan Diterima - Perpustakaan MTsN 7 Banjar</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    @keyframes popIn {
      0% { transform: scale(0); opacity: 0; }
      60% { transform: scale(1.15); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes pulseOut {
      0% { transform: scale(1); opacity: 0.7; }
      100% { transform: scale(2.2); opacity: 0; }
    }
    @keyframes floatEmoji {
      0% { transform: translate(-50%,-50%) scale(0); opacity: 0; }
      40% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dotPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: .3; }
    }
    .success-circle { animation: popIn .6s cubic-bezier(.175,.885,.32,1.275) forwards; }
    .pulse-ring { animation: pulseOut 2s ease-out infinite; }
    .pulse-ring-2 { animation: pulseOut 2s ease-out .6s infinite; }
    .status-dot { animation: dotPulse 1.5s ease-in-out infinite; }
    .detail-row { animation: slideInRow .4s ease both; }
    @keyframes slideInRow {
      from { opacity: 0; transform: translateX(-12px); }
      to { opacity: 1; transform: translateX(0); }
    }
  </style>
</head>
<body>
<div class="library-wrapper">

  <div class="lib-overlay" id="libOverlay" onclick="closeLibSidebar()"></div>

  <aside class="lib-sidebar" id="libSidebar">
    <div class="lib-sidebar-header">
      <a href="perpustakaan.html" class="lib-sidebar-logo">
        <div class="lib-sidebar-logo-icon">
        <img src="img/logo.png" alt="Logo MTsN 7 Banjar">
        </div>
        <div>
          <p style="font-size:.875rem;font-weight:700;color:var(--color-slate-800);line-height:1.2;margin:0">Perpustakaan</p>
          <p style="font-size:.75rem;color:var(--color-sky-500);margin:0">MTsN 7 Banjar</p>
        </div>
      </a>
    </div>
    <nav class="lib-sidebar-nav">
      <span class="lib-sidebar-nav-label">Menu Utama</span>
      <ul class="lib-nav-list">
        <li><a href="perpustakaan.html" class="lib-sidebar-link">
          <svg class="lib-sidebar-link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          Beranda
        </a></li>
        <li><a href="katalog-kelas.html" class="lib-sidebar-link">
          <svg class="lib-sidebar-link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/><polyline points="10 2 10 10 13 7 16 10 16 2"/></svg>
          Katalog Kelas
        </a></li>
        <li><a href="buku-cerita.html" class="lib-sidebar-link">
          <svg class="lib-sidebar-link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
          Buku Cerita
        </a></li>
        <li><a href="request-buku.html" class="lib-sidebar-link active">
          <svg class="lib-sidebar-link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="16"/><line x1="8" x2="16" y1="12" y2="12"/></svg>
          Request Buku <span class="lib-sidebar-link-dot"></span>
        </a></li>
      </ul>
      <hr class="lib-sidebar-divider">
      <a href="index.html" class="lib-sidebar-link" style="color:var(--color-slate-500)">
        <svg class="lib-sidebar-link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
        Kembali ke Website
      </a>
    </nav>
    <div class="lib-sidebar-footer">
      <div class="lib-sidebar-help-card">
        <p style="font-size:.75rem;font-weight:600;color:var(--color-slate-700);margin:0 0 .25rem">Butuh bantuan?</p>
        <p style="font-size:.75rem;color:var(--color-slate-500);margin:0 0 .5rem">Hubungi petugas perpustakaan kami</p>
        <a href="tel:02112345678" style="font-size:.75rem;color:var(--color-sky-600);font-weight:600">(021) 1234-5678</a>
      </div>
    </div>
  </aside>

  <div class="lib-main">
    <header class="lib-topbar">
      <button class="lib-menu-btn" onclick="toggleLibSidebar()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
      </button>
      <div class="lib-search">
        <svg class="lib-search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        <input type="text" placeholder="Cari buku, judul, penulis...">
      </div>
      <div class="lib-topbar-actions">
        <!-- <button class="lib-notif-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
          <span class="lib-notif-dot"></span>
        </button>
        <button class="lib-profile-btn">
          <div class="lib-profile-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          </div>
          <span class="lib-profile-name">Siswa</span>
        </button> -->
      </div>
    </header>

    <main class="lib-content" style="background:linear-gradient(135deg,var(--color-amber-50),white,var(--color-orange-300/5))">
      <div style="max-width:36rem;margin:0 auto;padding-top:2rem" id="confirmContent">
        <!-- Rendered by JS -->
      </div>
    </main>
  </div>
</div>

<script>
function toggleLibSidebar() {
  document.getElementById('libSidebar').classList.toggle('open');
  document.getElementById('libOverlay').classList.toggle('open');
}
function closeLibSidebar() {
  document.getElementById('libSidebar').classList.remove('open');
  document.getElementById('libOverlay').classList.remove('open');
}

document.addEventListener('DOMContentLoaded', function() {
  // Ambil data yang disimpan saat submit form tadi
  const stored = sessionStorage.getItem('requestBukuData');
  
  if (!stored) {
    // Jika tidak ada data (misal user ketik manual url ini), arahkan balik ke form
    window.location.href = 'request-buku.html';
    return;
  }

  const data = JSON.parse(stored);
  const today = new Date().toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });

  // Fungsi helper untuk icon
  const iconSvg = (path) => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--color-amber-500)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">${path}</svg>`;

  const icons = {
    user: iconSvg('<path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>'),
    book: iconSvg('<path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/>'),
    kelas: iconSvg('<path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/>'),
    pen: iconSvg('<path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"/>'),
    info: iconSvg('<circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/>'),
    tag: iconSvg('<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/>'),
  };

  const detailRows = [
    { icon: icons.user, label: 'Nama Pemohon', value: data.nama },
    { icon: icons.kelas, label: 'Kelas', value: data.kelas },
    { icon: icons.book, label: 'Judul Buku', value: data.judulBuku },
  ];
  if (data.penulis) detailRows.push({ icon: icons.pen, label: 'Penulis', value: data.penulis });
  if (data.keterangan) detailRows.push({ icon: icons.info, label: 'Keterangan', value: data.keterangan });

  document.getElementById('confirmContent').innerHTML = `
    <!-- Success Animation -->
    <div style="text-align:center;margin-bottom:1.5rem">
      <div style="position:relative;display:inline-block">
        <div style="position:absolute;inset:0;border:4px solid #d1fae5;border-radius:50%" class="pulse-ring"></div>
        <div style="position:absolute;inset:0;border:4px solid #d1fae5;border-radius:50%" class="pulse-ring-2"></div>
        <div style="width:6rem;height:6rem;border-radius:50%;background:#ecfdf5;display:flex;align-items:center;justify-content:center;position:relative;z-index:1" class="success-circle">
          <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>
        </div>
      </div>
    </div>

    <!-- Title -->
    <div style="text-align:center;margin-bottom:2rem;animation:slideUp .5s .2s ease both">
      <h1 style="font-size:1.75rem;font-weight:700;color:var(--color-slate-800);margin:0 0 .75rem">Pengajuan Diterima! üéä</h1>
      <p style="color:var(--color-slate-500);line-height:1.7;max-width:28rem;margin:0 auto">
        Request buku kamu sudah kami terima. Tim perpustakaan akan memprosesnya dalam 
        <strong style="color:var(--color-amber-600)">3-7 hari kerja</strong>.
      </p>
    </div>

    <!-- Summary Card -->
    <div style="background:white;border-radius:var(--radius-3xl);box-shadow:0 20px 60px rgba(0,0,0,.08);border:1px solid var(--color-slate-100);overflow:hidden;margin-bottom:1.5rem;animation:slideUp .5s .3s ease both">
      <div style="height:.5rem;background:linear-gradient(to right,#fbbf24,#fb923c,#10b981)"></div>
      <div style="padding:1.75rem">
        <h2 style="font-size:.875rem;font-weight:700;color:var(--color-slate-700);margin:0 0 1.25rem;display:flex;align-items:center;gap:.5rem">
          <span style="width:1.75rem;height:1.75rem;border-radius:var(--radius-lg);background:var(--color-amber-50);display:flex;align-items:center;justify-content:center">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="var(--color-amber-500)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>
          </span>
          Detail Pengajuan
        </h2>

        <div style="display:flex;flex-direction:column;gap:.75rem">
          ${detailRows.map((row, i) => `
            <div class="detail-row" style="display:flex;align-items:flex-start;gap:.75rem;background:var(--color-slate-50);border-radius:var(--radius-xl);padding:.875rem;animation-delay:${.35 + i * .07}s">
              <div style="width:2rem;height:2rem;border-radius:var(--radius-lg);background:white;box-shadow:var(--shadow-sm);border:1px solid var(--color-slate-100);display:flex;align-items:center;justify-content:center;flex-shrink:0">
                ${row.icon}
              </div>
              <div>
                <p style="font-size:.6875rem;color:var(--color-slate-400);margin:0 0 .25rem">${row.label}</p>
                <p style="font-size:.875rem;font-weight:600;color:var(--color-slate-800);margin:0">${row.value}</p>
              </div>
            </div>
          `).join('')}
        </div>

        <!-- Status & Date -->
        <div style="margin-top:1.25rem;padding-top:1.25rem;border-top:1px solid var(--color-slate-100);display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.75rem">
          <div>
            <p style="font-size:.6875rem;color:var(--color-slate-400);margin:0 0 .375rem">Status Pengajuan</p>
            <div style="display:flex;align-items:center;gap:.5rem">
              <span class="status-dot" style="width:.625rem;height:.625rem;background:var(--color-amber-400);border-radius:50%;display:inline-block"></span>
              <span style="font-size:.875rem;font-weight:600;color:var(--color-amber-600)">Sedang Diproses</span>
            </div>
          </div>
          <div style="text-align:right">
            <p style="font-size:.6875rem;color:var(--color-slate-400);margin:0 0 .375rem">Tanggal Pengajuan</p>
            <p style="font-size:.875rem;font-weight:600;color:var(--color-slate-600);margin:0">${today}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Process info -->
    <div style="background:linear-gradient(135deg,var(--color-amber-50),var(--color-sky-50));border-radius:var(--radius-2xl);padding:1.25rem;margin-bottom:1.5rem;border:1px solid var(--color-amber-100);animation:slideUp .5s .5s ease both">
      <div style="display:flex;gap:.75rem">
        <span style="font-size:1.5rem;flex-shrink:0">üìã</span>
        <div>
          <p style="font-size:.875rem;font-weight:600;color:var(--color-slate-700);margin:0 0 .5rem">Proses Selanjutnya</p>
          <ul style="list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.375rem">
            <li style="font-size:.8125rem;color:var(--color-slate-500);display:flex;align-items:flex-start;gap:.5rem"><span style="color:var(--color-amber-500)">‚úì</span> Request kamu sudah tercatat di sistem perpustakaan</li>
            <li style="font-size:.8125rem;color:var(--color-slate-500);display:flex;align-items:flex-start;gap:.5rem"><span style="color:var(--color-amber-500)">‚è≥</span> Tim akan memproses dalam 3-7 hari kerja</li>
            <li style="font-size:.8125rem;color:var(--color-slate-500);display:flex;align-items:flex-start;gap:.5rem"><span style="color:var(--color-amber-500)">üì£</span> Konfirmasi diberikan melalui guru kelasmu</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div style="display:flex;flex-wrap:wrap;gap:.75rem;animation:slideUp .5s .6s ease both">
      <a href="perpustakaan.html" style="flex:1;min-width:140px;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem;background:var(--color-sky-500);color:white;border-radius:var(--radius-2xl);font-size:.9375rem;font-weight:600;text-decoration:none;box-shadow:0 8px 20px rgba(14,165,233,.3);transition:all .2s">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        Perpustakaan
      </a>
      <a href="request-buku.html" style="flex:1;min-width:140px;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem;border:2px solid var(--color-amber-200);color:var(--color-amber-600);border-radius:var(--radius-2xl);font-size:.9375rem;font-weight:600;text-decoration:none;transition:all .2s">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>
        Request Lagi
      </a>
    </div>
  `;
});
</script>
<style>
@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</body>
</html>